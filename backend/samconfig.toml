# SAM CLI configuration
# See: https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-config.html
#
# Usage:
#   sam build                        # Build with default config
#   sam deploy                       # Deploy with default (development) config
#   sam deploy --config-env staging  # Deploy to staging
#   sam deploy --config-env prod     # Deploy to production

version = 0.1

# =============================================================================
# Default environment (development)
# =============================================================================
[default.build.parameters]
use_container = false
cached = true

[default.deploy.parameters]
stack_name = "morning-routine-api-dev"
region = "us-east-1"
confirm_changeset = true
capabilities = "CAPABILITY_IAM"
resolve_s3 = true
parameter_overrides = [
    "Environment=development",
    "SupabaseUrl=REPLACE_ME",
    "SupabaseKey=REPLACE_ME",
    "CorsOrigins=http://localhost:3000,https://*.vercel.app",
]

# =============================================================================
# Staging
# =============================================================================
[staging.build.parameters]
use_container = false
cached = true

[staging.deploy.parameters]
stack_name = "morning-routine-api-staging"
region = "us-east-1"
confirm_changeset = true
capabilities = "CAPABILITY_IAM"
resolve_s3 = true
parameter_overrides = [
    "Environment=staging",
    "SupabaseUrl=REPLACE_ME",
    "SupabaseKey=REPLACE_ME",
    "CorsOrigins=https://*.vercel.app",
]

# =============================================================================
# Production
# =============================================================================
[prod.build.parameters]
use_container = false
cached = true

[prod.deploy.parameters]
stack_name = "morning-routine-api-prod"
region = "us-east-1"
confirm_changeset = true
capabilities = "CAPABILITY_IAM"
resolve_s3 = true
parameter_overrides = [
    "Environment=production",
    "SupabaseUrl=REPLACE_ME",
    "SupabaseKey=REPLACE_ME",
    "CorsOrigins=https://your-production-domain.vercel.app",
]
